---
date: 2025-11-15
---

# クラスと__init__の基本をAppSheetの知識を使っていい感じに理解した気がする。【Python学習メモ(2)】

<!-- more -->

私はAppSheetというGoogleが出しているノーコードツールで業務アプリを作っている。

ノーコードツールを作るにあたり、業務内で扱われるデータの流れというものを定義する必要があり、一般的にデータモデリングと言われている。

ノーコードツールでもデータモデリングをしっかりすることで将来的に使えるデータをためていこうという「読み書きパソコン」というYouTubeチャンネルの方向性で私は学習を進めている。

[読み書きパソコン](https://www.youtube.com/@yomikakiPC)

さらにその知見を使ってノーコードではなくしっかりコードを書いてアプリを作ろうと現在Pythonを学習中だ。

これらの記事はその学習の中でのログを学習ノートとして残しておこうという趣旨で書かれている。

[【学習メモ】PythonでつくるWebアプリの作り方｜ぷよぜろ｜note](https://note.com/puyozero/m/m961b392421a8)

現在使っている学習教材は下記の書籍と動画である。

https://x.gd/qRHpC

https://m.youtube.com/watch?v=XMDWpPZkRCc&pp=0gcJCR4Bo7VqN5tD

ガチンコエンジニアの皆様は「この人は個々で躓いてるんだなぁ」と眺めてもらえると嬉しい。
アドバイスなどいただけるとなお嬉しい。


## 学習のアウトプット

「読み書きパソコン」で学んだAppSheetの知識を活かすために、変数名やクラス名を一部日本語で書いている。本来半角英数にするというのは理解しているのでそこに対するツッコミは容赦願いたい。

### Pythonのクラスはレコードの設計図

Pythonのクラスの理解が進んだのでメモしておく。AppSheetとデータベースのほうの理解が進んでいるので、そちらと置き換えて整理していく。

まずはAppSheetとつなげるために、言葉の定義をこう変換する。

- オブジェクト(インスタンス) = レコード
- クラス = (スプレッドシートでの)カラム設計
- クラス名 = テーブル名

と対応させておこう‥

つまるところ、テーブルにデータを入れるための型を作る。AppSheetに置き換えるとスプレッドシートの1行目にカラムを設定するようなものだと言えそうだ。

例えば顧客テーブルにこういうレコードを作りたいとする。

ID顧客  |  姓  |  名  |  性別  …

Pythonではこうなる（IDについては未学習なので固定で1とする）。

```python
# クラス名をまず決める
class 顧客:
    # ここに処理を書いていく
    # 一つ一つの処理はdefの中にあってメソッドと呼ぶ
    # 「self」以降の姓とか名とかは「属性」と呼ぶ
    # まずはレコード（オブジェクト、インスタンス）を作るための処理
    def __init__(self, ID顧客, 姓, 名, 性別):
        #自分自身のカラム(self.xxx)にそれぞれの引数を入れていく
        self.ID顧客 = ID顧客
        self.姓 = 姓
        self.名 = 名
        self.性別 = 性別
```

実際にデータを入れる場合は

```python
class 顧客:
    def __init__(self, ID顧客, 姓, 名, 性別):
        self.ID顧客 = ID顧客
        self.姓 = 姓
        self.名 = 名
        self.性別 = 性別
        
# クラスを呼び出してデータを渡す
customer_a = 顧客('1', '田中', '太郎', '男性')
```

AppSheetのフォームでデータ入力してるようなものだと思えばわかりやすい。

この結果はスプレットシートで表現するとこうなる

ID顧客  |  姓     |  名      |  性別  …
1           |  田中  |  太郎  |  男性 …

### __init__ はクラスを呼び出すときに自動的に実行される

サプーさんの動画でクラスの学習をしているときに引っかかった部分がある。

> メソッドは関数みたいに「def 小文字のメソッド名」を書いて()を書きます。
（中略）イニシャライザー（__init__）は初期化っていう意味なのでまずデータを設定してオブジェクトを初期化するという感じです
> 

「ん、なんでわかりやすい名前をつけられるのに__init__ なんていうわかりにくいものを使うんだ？初期化って言ってるけどこれやらないと前の処理のデータが残るとかなのか？？」

という疑問を持った。

なのでGemini先生に聞いてみた。以下やりとりを余計なところを端折って貼っておく。

私『Pythonでクラスを作るとき、クラスの名前を __init__ とすると思います。これはインスタンス作る前にクラスの中身まっさらにリセットするよーって理解でいいか？』

> 「まっさらにリセットする」というよりは、「新しくインスタンスを作るときに、そのインスタンスの初期設定（しょきせってい）をする」というイメージが近いです。（中略）「指定された設定で初期セットアップする」という感じですね！
> 

私『__init__ じゃなくて 顧客情報入力 ってメソッド名にもできると思うんだけど、__init__ を使うのはなんで？』

> **違いは「自動」か「手動」か**
> 
> - __init__
>     - **自動で呼び出される**（インスタンスを作る時）。
>     - 役割: インスタンスが生まれた瞬間に**必ず持っていてほしい初期設定**（名前、性別、住所など）をセットするため。
> - 任意の名前のメソッド
>     - **手動で呼び出す**必要がある。
>     - 役割: インスタンスが生まれた**後で**、何か操作をしたり、状態を変えたりするため（例: car.change_last_name("佐藤") など）。

なるほど。つまりこういうことだ。__init__ にすることで

```python
customer_a = 顧客('1', '田中', '太郎', '男性')
```

こういう形でクラス名を指定して引数で情報を渡すだけで、自動的に中にある def __init__ (…) が実行される。

しかし __init__ ではなく、def 顧客情報(…) とした場合は下記のような形にしないと def 顧客情報(…) が実行されない

```python
# 1. まず、空っぽのオブジェクトを作る
customer_a = 顧客() 

# 2. 次に、「手動で」メソッドを呼び出す
customer_a.顧客情報('1', '田中', '太郎', '男性') 
```

この2段階を踏まないと実行されないのである。これは非常に手間だ。

そして最後のひとことで、またAppSheetとつながった。

> __init__ は、「このクラスのインスタンスを作るなら、絶対にこの情報を入れてもらわないと困る！」という**ルールを強制する**ためにも使われるんです。
> 

### __init__ は AppSheetのフォーム入力時のRequiredと同じ効果を持っている

先程私はクラスを使ったオブジェクト作成が、 AppSheetで入力フォームでデータを入れていく作業として理解した。

そして上記の

> 「絶対にこの情報を入れてもらわないと困る！」という**ルールを強制する**ためにも使われる
> 

という部分。ここが「AppSheetのテーブル設定でRequiredにチェックを入れることとまったく同じじゃないか？」と気がつく。

```python
なるほどね。
自動呼び出しするかどうか、か！

つまり、クラスはDBのレコードを作るためのカラムの組み合わせを予め持っていて、引数でそこにデータを流し込むと。
業務アプリで入力フォーム立ち上げたときの「入力必須（呼び出し必須）」的な動き、ﾘｸﾜｲﾔｰ 的な動きみたいな感じか！
```

> その例え、すごく分かりやすいです！まさにそんな感じです。
> 
> - **クラス (`class 顧客情報`)**: 「`顧客` というテーブル（DB）の設計図」
> - **`__init__` の引数 (`'1','田中','太郎','男性'` )**: 「`ID顧客,姓,名,性別` というカラム（入力必須/Required）」
> - **インスタンス (customer_a)**: 「設計図と必須データを使って作られた、新しいレコード（行）」
> 
> （前略）ではクラスに対して、うっかり顧客情報を指定せずにインスタンスを作ろうとしたら、どうなると思いますか？
> 

```python
何もしてないから指示が通る。虫食いでインスタンス（オブジェクト）が作られてしまう？
```

理解したはずなのになぜか回答を外してしまう私。

> 「何も指定しなかったら、データが空っぽの『虫食い』状態のインスタンスができてしまうかも？」と思いますよね。
> 
> 
> でも、Pythonはそこをしっかり止めてくれます。
> 
> `__init__` で `def __init__(ID顧客, 姓, 名, 性別):` と書いた時点で、「`ID顧客, 姓, 名, 性別` は必須（Required）ですよ！」というルールが設定されます。
> 
> もし `customer = 顧客情報()` のように引数を渡さないで実行すると、Pythonは「話が違う！」と判断して、インスタンスを作るのを**ストップ**し、**エラー**を出します。
> 

### 初期値（initial value）を設定したい場合は 属性=”xxx” で設定できる

この部分の説明は、「顧客情報を入力する」という状況よりも、「タスクを登録する」という状況に置き換えたほうがわかりやすいので、顧客情報の作成からタスクの作成に内容を切り替えて書いていく。

クラスの定義はこういう形に変更した。

```python
class タスク:
    def __init__(self, IDタスク, タスク名, ステータス):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

スプレッドシートで表現するとこういう設計をしたことになる。

IDタスク  |  タスク名  |  ステータス

タスクの登録ではこの「ステータス」をわざわざ設定しなくても登録した時点で「未着手」という形にしておきたい。AppSheetだとinitial valueに “未着手” と書けば簡単に設定できる。

それをクラスの中で実現しようとするとこうなる。

```python
class タスク:
    # ステータスに初期値として「未着手」を設定する場合は下記のように書く
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

こうしておくことで下記のようにステータスの引数を設定しなくても、ステータスには「未着手」という情報が勝手に入るようになる。

```python
class タスク:
    # ステータスに初期値として「未着手」を設定する場合は下記のように書く
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス

# ステータスを指定せずにオブジェクトを作る
task = タスク('1', '田中さんに連絡する')
```

通常であれば上記のコードで実行してもエラーが出るのだが、ステータスに初期値として「未着手」を設定しているので、エラーが出ず下記のようなデータが入る。

IDタスク  |  タスク名                     |  ステータス
1               |  田中さんに連絡する  |  未着手

### **初期値をもたせる属性は引数の最後にまとめないとエラーが出る**

最後に注意点。初期値を持つ属性は必ず最後にまとめるようにする。初期値を設定していない属性の前に初期値を設定した属性を書いてしまうとシンタックスエラーになってしまうので注意したい。

具体例を出すとこれはエラーが出ない

```python
class タスク:
    *# 初期値をもたせる「ステータス」を引数の最後に書いているので問題ない*
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

しかしこっちだとエラーが出る

```python
class タスク:
    *# 初期値をもたせる「ステータス」を引数の真ん中に持ってきた。*
    def __init__(self, IDタスク, ステータス='未着手', タスク名):
        self.IDタスク = IDタスク
        self.ステータス = ステータス
        self.タスク名 = タスク名
```

## 総括: クラスはデータ入力フォーム、__init__をデフォルトにするのが吉。

箇条書きでまとめよう。

- テーブルにレコードを作るための型
- __init__ を使う
- __init__ で指定したカラム（属性）は Required となり入力必須となる
- 初期値を設定したいなら 属性=”xxx” と書く

今回の学習でPythonのクラスについてかなり理解が進んだ。今まででの学習で一番解像度が上がってとてもたのしい。

ただクラスの学習もPythonの学習も基本的にはミクロな部分の学習が多いので理解が進みにくい。自分が今何のどこを学んでいるのかわかるようになるために、今後はPython、Flaskなどの全体感を掴む学習を進めていきたい。
