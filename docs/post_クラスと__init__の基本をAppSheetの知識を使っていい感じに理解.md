# クラスと__init__の基本をAppSheetの知識を使っていい感じに理解した気がする。【Python学習メモ(2)】


私はAppSheetというGoogleが出しているノーコードツールで業務アプリを作っている。

ノーコードツールを作るにあたり、業務内で扱われるデータの流れというものを定義する必要があり、一般的にデータモデリングと言われている。

ノーコードツールでもデータモデリングをしっかりすることで将来的に使えるデータをためていこうという「読み書きパソコン」というYouTubeチャンネルの方向性で私は学習を進めている。

[読み書きパソコン](https://www.youtube.com/@yomikakiPC)

さらにその知見を使ってノーコードではなくしっかりコードを書いてアプリを作ろうと現在Pythonを学習中だ。

これらの記事はその学習の中でのログを学習ノートとして残しておこうという趣旨で書かれている。

[【学習メモ】PythonでつくるWebアプリの作り方｜ぷよぜろ｜note](https://note.com/puyozero/m/m961b392421a8)

現在使っている学習教材は下記の書籍と動画である。

https://x.gd/qRHpC

https://m.youtube.com/watch?v=XMDWpPZkRCc&pp=0gcJCR4Bo7VqN5tD

ガチンコエンジニアの皆様は「この人は個々で躓いてるんだなぁ」と眺めてもらえると嬉しい。
アドバイスなどいただけるとなお嬉しい。

---

## 学習のアウトプット

「読み書きパソコン」で学んだAppSheetの知識を活かすために、変数名やクラス名を一部日本語で書いている。本来半角英数にするというのは理解しているのでそこに対するツッコミは容赦願いたい。

### Pythonのクラスはレコードの設計図

Pythonのクラスの理解が進んだのでメモしておく。AppSheetとデータベースのほうの理解が進んでいるので、そちらと置き換えて整理していく。

まずはAppSheetとつなげるために、言葉の定義をこう変換する。

- オブジェクト(インスタンス) = レコード
- クラス = (スプレッドシートでの)カラム設計
- クラス名 = テーブル名

と対応させておこう‥

つまるところ、テーブルにデータを入れるための型を作る。AppSheetに置き換えるとスプレッドシートの1行目にカラムを設定するようなものだと言えそうだ。

例えば顧客テーブルにこういうレコードを作りたいとする。

ID顧客  |  姓  |  名  |  性別  …

Pythonではこうなる（IDについては未学習なので固定で1とする）。

```python
# クラス名をまず決める
class 顧客:
    # ここに処理を書いていく
    # 一つ一つの処理はdefの中にあってメソッドと呼ぶ
    # 「self」以降の姓とか名とかは「属性」と呼ぶ
    # まずはレコード（オブジェクト、インスタンス）を作るための処理
    def __init__(self, ID顧客, 姓, 名, 性別):
        #自分自身のカラム(self.xxx)にそれぞれの引数を入れていく
        self.ID顧客 = ID顧客
        self.姓 = 姓
        self.名 = 名
        self.性別 = 性別
```

実際にデータを入れる場合は

```python
class 顧客:
    def __init__(self, ID顧客, 姓, 名, 性別):
        self.ID顧客 = ID顧客
        self.姓 = 姓
        self.名 = 名
        self.性別 = 性別
        
# クラスを呼び出してデータを渡す
customer_a = 顧客('1', '田中', '太郎', '男性')
```

AppSheetのフォームでデータ入力してるようなものだと思えばわかりやすい。

この結果はスプレットシートで表現するとこうなる

ID顧客  |  姓     |  名      |  性別  …
1           |  田中  |  太郎  |  男性 …

### __init__ はクラスを呼び出すときに自動的に実行される

サプーさんの動画でクラスの学習をしているときに引っかかった部分がある。

> メソッドは関数みたいに「def 小文字のメソッド名」を書いて()を書きます。
（中略）イニシャライザー（__init__）は初期化っていう意味なのでまずデータを設定してオブジェクトを初期化するという感じです
> 

「ん、なんでわかりやすい名前をつけられるのに__init__ なんていうわかりにくいものを使うんだ？初期化って言ってるけどこれやらないと前の処理のデータが残るとかなのか？？」

という疑問を持った。

なのでGemini先生に聞いてみた。以下やりとりを余計なところを端折って貼っておく。

私『Pythonでクラスを作るとき、クラスの名前を __init__ とすると思います。これはインスタンス作る前にクラスの中身まっさらにリセットするよーって理解でいいか？』

> 「まっさらにリセットする」というよりは、「新しくインスタンスを作るときに、そのインスタンスの初期設定（しょきせってい）をする」というイメージが近いです。（中略）「指定された設定で初期セットアップする」という感じですね！
> 

私『__init__ じゃなくて 顧客情報入力 ってメソッド名にもできると思うんだけど、__init__ を使うのはなんで？』

> **違いは「自動」か「手動」か**
> 
> - __init__
>     - **自動で呼び出される**（インスタンスを作る時）。
>     - 役割: インスタンスが生まれた瞬間に**必ず持っていてほしい初期設定**（名前、性別、住所など）をセットするため。
> - 任意の名前のメソッド
>     - **手動で呼び出す**必要がある。
>     - 役割: インスタンスが生まれた**後で**、何か操作をしたり、状態を変えたりするため（例: car.change_last_name("佐藤") など）。

なるほど。つまりこういうことだ。__init__ にすることで

```python
customer_a = 顧客('1', '田中', '太郎', '男性')
```

こういう形でクラス名を指定して引数で情報を渡すだけで、自動的に中にある def __init__ (…) が実行される。

しかし __init__ ではなく、def 顧客情報(…) とした場合は下記のような形にしないと def 顧客情報(…) が実行されない

```python
# 1. まず、空っぽのオブジェクトを作る
customer_a = 顧客() 

# 2. 次に、「手動で」メソッドを呼び出す
customer_a.顧客情報('1', '田中', '太郎', '男性') 
```

この2段階を踏まないと実行されないのである。これは非常に手間だ。

そして最後のひとことで、またAppSheetとつながった。

> __init__ は、「このクラスのインスタンスを作るなら、絶対にこの情報を入れてもらわないと困る！」という**ルールを強制する**ためにも使われるんです。
> 

### __init__ は AppSheetのフォーム入力時のRequiredと同じ効果を持っている

先程私はクラスを使ったオブジェクト作成が、 AppSheetで入力フォームでデータを入れていく作業として理解した。

そして上記の

> 「絶対にこの情報を入れてもらわないと困る！」という**ルールを強制する**ためにも使われる
> 

という部分。ここが「AppSheetのテーブル設定でRequiredにチェックを入れることとまったく同じじゃないか？」と気がつく。

```python
なるほどね。
自動呼び出しするかどうか、か！

つまり、クラスはDBのレコードを作るためのカラムの組み合わせを予め持っていて、引数でそこにデータを流し込むと。
業務アプリで入力フォーム立ち上げたときの「入力必須（呼び出し必須）」的な動き、ﾘｸﾜｲﾔｰ 的な動きみたいな感じか！
```

> その例え、すごく分かりやすいです！まさにそんな感じです。
> 
> - **クラス (`class 顧客情報`)**: 「`顧客` というテーブル（DB）の設計図」
> - **`__init__` の引数 (`'1','田中','太郎','男性'` )**: 「`ID顧客,姓,名,性別` というカラム（入力必須/Required）」
> - **インスタンス (customer_a)**: 「設計図と必須データを使って作られた、新しいレコード（行）」
> 
> （前略）ではクラスに対して、うっかり顧客情報を指定せずにインスタンスを作ろうとしたら、どうなると思いますか？
> 

```python
何もしてないから指示が通る。虫食いでインスタンス（オブジェクト）が作られてしまう？
```

理解したはずなのになぜか回答を外してしまう私。

> 「何も指定しなかったら、データが空っぽの『虫食い』状態のインスタンスができてしまうかも？」と思いますよね。
> 
> 
> でも、Pythonはそこをしっかり止めてくれます。
> 
> `__init__` で `def __init__(ID顧客, 姓, 名, 性別):` と書いた時点で、「`ID顧客, 姓, 名, 性別` は必須（Required）ですよ！」というルールが設定されます。
> 
> もし `customer = 顧客情報()` のように引数を渡さないで実行すると、Pythonは「話が違う！」と判断して、インスタンスを作るのを**ストップ**し、**エラー**を出します。
> 

### 初期値（initial value）を設定したい場合は 属性=”xxx” で設定できる

この部分の説明は、「顧客情報を入力する」という状況よりも、「タスクを登録する」という状況に置き換えたほうがわかりやすいので、顧客情報の作成からタスクの作成に内容を切り替えて書いていく。

クラスの定義はこういう形に変更した。

```python
class タスク:
    def __init__(self, IDタスク, タスク名, ステータス):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

スプレッドシートで表現するとこういう設計をしたことになる。

IDタスク  |  タスク名  |  ステータス

タスクの登録ではこの「ステータス」をわざわざ設定しなくても登録した時点で「未着手」という形にしておきたい。AppSheetだとinitial valueに “未着手” と書けば簡単に設定できる。

それをクラスの中で実現しようとするとこうなる。

```python
class タスク:
    # ステータスに初期値として「未着手」を設定する場合は下記のように書く
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

こうしておくことで下記のようにステータスの引数を設定しなくても、ステータスには「未着手」という情報が勝手に入るようになる。

```python
class タスク:
    # ステータスに初期値として「未着手」を設定する場合は下記のように書く
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス

# ステータスを指定せずにオブジェクトを作る
task = タスク('1', '田中さんに連絡する')
```

通常であれば上記のコードで実行してもエラーが出るのだが、ステータスに初期値として「未着手」を設定しているので、エラーが出ず下記のようなデータが入る。

IDタスク  |  タスク名                     |  ステータス
1               |  田中さんに連絡する  |  未着手

### **初期値をもたせる属性は引数の最後にまとめないとエラーが出る**

最後に注意点。初期値を持つ属性は必ず最後にまとめるようにする。初期値を設定していない属性の前に初期値を設定した属性を書いてしまうとシンタックスエラーになってしまうので注意したい。

具体例を出すとこれはエラーが出ない

```python
class タスク:
    *# 初期値をもたせる「ステータス」を引数の最後に書いているので問題ない*
    def __init__(self, IDタスク, タスク名, ステータス='未着手'):
        self.IDタスク = IDタスク
        self.タスク名 = タスク名
        self.ステータス = ステータス
```

しかしこっちだとエラーが出る

```python
class タスク:
    *# 初期値をもたせる「ステータス」を引数の真ん中に持ってきた。*
    def __init__(self, IDタスク, ステータス='未着手', タスク名):
        self.IDタスク = IDタスク
        self.ステータス = ステータス
        self.タスク名 = タスク名
```

## 総括: クラスはデータ入力フォーム、__init__をデフォルトにするのが吉。

箇条書きでまとめよう。

- テーブルにレコードを作るための型
- __init__ を使う
- __init__ で指定したカラム（属性）は Required となり入力必須となる
- 初期値を設定したいなら 属性=”xxx” と書く

今回の学習でPythonのクラスについてかなり理解が進んだ。今まででの学習で一番解像度が上がってとてもたのしい。

ただクラスの学習もPythonの学習も基本的にはミクロな部分の学習が多いので理解が進みにくい。自分が今何のどこを学んでいるのかわかるようになるために、今後はPython、Flaskなどの全体感を掴む学習を進めていきたい。

iPhone、iPad（Apple Pencil）、Mac、AirPodsPro、Apple Watch、AirTag…

これらのApple製品は、私が実際に所持しているApple製品だ。所持しているApple製品の数からわかるとおり、私はAppleが大好きだ。
しかし自己紹介記事でも書いたとおり、私は本業ではAndroidを販売している。

[【noteデビュー！】Apple信者がAndroid販売員!? データベース好きスマホ販売員の自己紹介｜ぷよぜろ](https://note.com/puyozero/n/n48b755a48104)

「なんでやねん」

そう思う人もいると思うだろう。私が一番そう思っていた。
しかし仕事である以上、お客様にはAndroidを販売しなければならない。そのためにはAndroidについてちゃんと勉強しなければならない。

そう思って最初は仕方なくAndroidについて調べていたが、調べて、自分で少しずつ使っていくうちに「やるやんAndroid」と思うように。

「Appleしか勝たん！」そう思っていた私だからこそ見えてきたAndroidのいいところを紹介していきたい。

## Androidが複雑に見えるのはレイヤーが1階層深いから

「Appleに比べてAndroidはわかりにくい。」

こう思う人は多いだろう。私自身その一人だったので気持はよく分かる。
実際、わかりにくい。非常に。

ではなぜAndroidはiPhoneよりわかりにくいのか。
その理由は「AndroidはiPhoneよりレイヤーが1階層多いから」である。

「どいういうことじゃい！」

「日本語で頼むわ」

「Androidの何がいいのか早く教えてくれ！」

という皆様の気持ちもよく分かるが、「Androidが複雑」という漠然とした問題を言語化しておきたいので順を追って説明していく。

### そもそも比較のレイヤーが揃ってない

“AndroidとiPhoneを比較する”というこの行為、そもそもレイヤーが揃っていない。AndroidはOSのことだしiPhoneは機種名のことだ。
これでは比較しようがない。

「iPhoneはiOSしかないからiOSのことにきまってるだろ！！」

おっしゃるとおり。
しかしここは言葉をちゃんと使ったほうがわかりやすいので一旦スルーしてほしい。

この部分を整理することで圧倒的に頭の中が整理できる。

> Google と Apple（OS提供社名レベル）
Android と iOS（OSレベル）
> 

### AndroidはOSの下に機種名があるわけではない。

上記のようにレイヤーを揃えるとAndroidが複雑な理由が徐々にわかってくる。
GoogleとAppleに分けて整理しよう。

まずはApple

> OS       | iOS
機種名 | iPhone(17, Air, Pro, ProMax)
> 

Appleは2階層だ。

次はGoogle

> OS           | Android
メーカー | 各社メーカー(Galaxy)
機種名     | Aシリーズ, Sシリーズ, Zシリーズ
> 

3階層だ。

Googleが提供しているAndroidというOSを書くメーカーが利用してそれぞれの機種を販売するという3階層になる。
場合によってはもっと階層が深くなることもあるだろう。

```python
Appleの場合
Apple
 └── iOS
      └── iPhone

Androidの場合
Google
 └── Android
      └── 各メーカー（例：Samsung, Sony）
           └── 機種（例：Galaxy S24, Xperia 1 VI）

```

iOSは

1. AppleがOSの機能を
2. どの機種でどこまで使えるようにするのか決める

当然Proモデルを買えばiOSの全機能が使える。

一方Androidは

1. Googleが提供しているAndroidの機能を
2. **各メーカーがOSのどの機能を採用するか選び**
3. **更に各メーカーの独自機能をつける**

というやり方だ。

つまり各メーカーの最上位モデルを買ってもAndroidのフル機能を使えない可能性が出てきてしまう。

例えば「AndroidのA」の機能を使いたいとしよう。
しかしメーカーは2.の段階で「AndoroidのA機能を切り捨てる」という判断をしていた場合、そのメーカーの最上位のAndroidの機能は使えない

それに含めてメーカーの独自機能も入ってくるし、その独自機能が使えるかどうかも機種のランクによって変わる。

こんな感じでAndroidは変数がiOSよりも多いのだ。
だから複雑に見える、と私は考えている。

### 階層的にPixelシリーズが比較しやすい

そう考えるとiPhoneと比較するならGoogle Pixelシリーズが比較しやすい。
理由はiPhoneと同じレイヤー構造で話ができるからだ。

iPhoneは
Apple > iPhone

Googleは
Google > Pixel

という同じ構造で話ができる。
しかもPixelは各メーカーが全く手を入れていない、マジモンのプレーンAndroid。

先程私が言ったOSの機能の取捨選択がない。
フラグシップモデルを買えばAndroidのすべての機能は使える。

これでiPhoneとの比較の前提は整った。

## Androidは生活に馴染みやすい

さんざんお時間をいただき前提を揃えておいてこんなこと言うのは気が引けるが、これから紹介するAndroidのいいところはPixelに限った話ではない。

ほとんどの機種で使える機能になる。

「じゃあ今までやってた前提は無駄？何だったの？」

かというとそうではない。Androidと向き合う際の前提知識として知っておいてほしい。「複雑なのは構造的に仕方のないこと」と思えるかどうかでだいぶ味方は違ってくる。

感覚的な話になるのだが、Androidの方が生活を便利にしたり、馴染みやすいように思う。

もちろんiPhoneにも便利な機能はたくさんあるのだが、「生活が便利になる」というよりは「仕事の効率があがる」という感覚の方が近い。

しかしここはブランドイメージの差によるところが大きいとも感じている。

以降は私がAndroidが便利だと感じた部分を紹介していく。

## Apple信者が選ぶ、Androidのいいところ

前置きが長くなってしまったが、ここから先はApple信者の私が特に「やるやんAndroid」となったのは

- かこって検索
- マルチウィンドウ
- Geminiにネイティブ対応
- コスパが良い
- ドロイド君がかわいい
- アプリ同士が自然に連携する

主にこれらのものになる。
それぞれ見ていこう。

### かこって検索

この機能をご存知だろうか、Androidでしかできない神機能である。
最近CMや広告でも見る機会が多いので知ってる人も増えてきた。

スマホの画面上に写ってるものなら何でもそのまま画像検索ができるという機能だ。
画像だけでなく画面上の文字も検索したりコピーしたりできる。

使い方はナビゲーションバー（またはホームボタン）を長押しすると画面が光るので、そのまま調べたいところをぐるっと囲う（文字はタップ）だけだ。

出展: [Google の新機能「かこって検索」で、写真やテキストの情報を調べよう](https://www.android.com/intl/ja_jp/articles/416/)

使い方はかなり奥深くSNS上の画像を検索するだけではない。

ここで書いてしまうと長くなってしまうので詳細は別記事にてまとめるつもりだ。

iPhoneでも最近似た機能であるが追加されているが、スクショを一度撮ってから行う必要があるためAndroidよりひと手間多いためAndroidの方に軍配が上がる。

出展: スクショするだけで検索できる、そう、iPhoneならね iOS 26の「ビジュアルインテリジェンス」が便利すぎる予感

### マルチウィンドウ

知ってる人は知っていると思うが、結構前（Android7）から使える機能だ。スマホで画面分割ができる。iPhoneユーザーからすると結構衝撃だ。

なぜならApple製品で画面分割をしたいとなるとiPadでしか実現できない。

画面分割幅の変更はもちろん、画面分割のくみ合わせ（分割幅含む）をホーム画面に保存することも可能。よく使う組み合わせを一瞬で呼び出せるので非常に便利。

### Geminiにネイティブ対応

AndroidはGoogleが作ったOS

GeminiもGoogleが作ったAI

この２つが意味する事。それはOSレベルでAI（Gemini）が最適化されているのである。

「AIといえばChatGPT」と言われて久しいが、Geminiも相当凄い。まずは扱えるコンテキストウインドウ（情報量）がはちゃめちゃに多いため、一度に扱える情報量が圧倒的に多い。

> 長いコンテキスト ウィンドウ
書籍全体、長いレポート、30,000 行のコード リポジトリを分析できます。
https://www.android.com/intl/ja_jp/ai/gemini/
> 

AppleもAppleintelligenceを発表しているが、発表当初に予告していたことをまだ全て実現できておらず、若干Androidに遅れをとっているように見える。

> 圧倒的な魅力のある人工知能（AI）搭載型スマートフォンの開発競争が進んでいる。しかし、アップルは競争相手のアンドロイド陣営から周回遅れになりつつある。
https://diamond.jp/articles/-/371013
> 

> アップルは、より賢い音声アシスタント「Siri（シリ）」を出すと予告したが実現しておらず、他の「アップル・インテリジェンス」の機能は期待ほどではない。
> 

Geminiでできることをいくつか羅列してみよう。

- スクショや写真からカレンダーに予定を入れてもらう
- YouTubeを要約してもらったり目次を作ってもらう
- 手描きメモから買い物リストを作る

これら3つの使い道は日常的にかなり使いやすい。私は特に上の２つをよく使っていてかなり便利に感じている。

### コスパが良い

「iPhoneは高い」

これは誰しもが思う部分だと思う。私自身そう思っている一人だ。

iPhoneと同等くらいに使える機種（PixelやGalaxy）を見るとほぼほぼ同じ価格帯になってくるのだが、処理性能やカメラ機能など各機能単体で比較していくとAndroidのほうがiPhoneよりコスパが良くなることが多い。

### ドロイド君がかわいい

意外と知られていないのが、Androidにはドロイド君というマスコットキャラクターがいる。

出典: [Android公式ページ](https://www.android.com/intl/ja_jp/new-features-on-android/featured/)

こいつが可愛い。

「そうか？」

と思う方もいるとともう。私がそうだった。しかしドロイド君を見慣れてくるとなんとも愛らしさを感じてくる。

単純接触効果かもしれないが、それでも今はドロイド君がかわいいなと感じているのは事実。

しかしAppleにはマスコットキャラクターはいない。あのスタイリッシュなリンゴマークのみである。

### アプリ同士が自然に連携する

これは先日気がついた。

私は調べ物でよくPerplexityAlを使うのだが、Androidで端末にもPerplexityAlアプリを入れて使っていた。

ある日のことだ。Androidで単語をコピーしようとしたところ、ポップアップの中に「PerplexityAl」とて出てきておどろいた。

特に設定を変えていないのにもかかわらず、文字を選択すると選択した文字をPerplexityAlで調べられるようになっていたのである。

これはiPhoneでは体験できない。ここはさすがに脱帽した。

### 顔検出により画面自動回転の誤爆防止をしてくれる（Pixelのみ）

これはPixelのみの機能にはなってしまうのだが、画面の自動回転で誤爆防止機能がついている。

どういうことか説明しよう。

あなたはスマホを横になってみているとき画面が意図せず開展してしまいイラッとした経験はないだろうか？その現象が起こるたびに設定を開き画面自動回転をオフにしていると思う。

しかしPixelにはこの画面自動回転誤爆を起こさないような機能がついている。それが「顔検出」である。

設定 > ディスプレイとタップ > 画面の自動回転 > 顔検出

この項目をオンにしておくことで、画面の自動回転をオンのまま横になっても画面が回転しなくなる。これはとても地味だがかなり快適度の上がる神機能だと思っている。

## Android、昔とは比べものにならないくらいよくなっている。

以上がApple信者である私が「やるやんAndroid」と思った部分である。正直昔のAndroidとは比べものにならないなと感じた。

「iPhoneからかえてもいいかもなぁ」と思う部分が非常に多く、非常に魅力的になっている。そのうえ最初に解説したメーカー独自のこだわりポイントもあったりして、各メーカーの思想を調べたりするのも面白いのでガジェオタにはたまらない。

しかしガジェオタではない方の方が圧倒的に多いので、「もう少しシンプルに一貫性を持たせてもいいのかもしれないなぁ」と思う部分もある。さらに「Androidのここが惜しい」と感じる部分もある。これはまた長くなるかもしれないので機会があれば別記事で取り上げたい。